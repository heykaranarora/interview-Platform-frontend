{"ast":null,"code":"import _objectSpread from\"C:/Users/Lenovo/OneDrive/Desktop/Interview Prep mern/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{toast}from'react-toastify';import{Link,useNavigate}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{setLoading}from'../../redux/authSlice';import{Loader2}from\"lucide-react\";import Navbar from'../Navbar';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RegisterPage=()=>{const dispatch=useDispatch();const loading=useSelector(state=>state.auth.loading);const navigate=useNavigate();const[formData,setFormData]=useState({name:'',phoneNumber:'',email:'',password:'',confirmPassword:''});const[passwordError,setPasswordError]=useState('');const handleChange=e=>{const{name,value}=e.target;setFormData(prevState=>{const updatedForm=_objectSpread(_objectSpread({},prevState),{},{[name]:value});// if(name === \"password\" || value?.length() < 6) {\n//     setPasswordError('Password must be at least 6 characters'); \n// }\nif(updatedForm.password&&updatedForm.confirmPassword){if(updatedForm.password!==updatedForm.confirmPassword){setPasswordError('Passwords do not match');}else{setPasswordError('');}}return updatedForm;});};const handleSubmit=async e=>{e.preventDefault();if(formData.password!==formData.confirmPassword){setPasswordError('Passwords do not match');return;}try{dispatch(setLoading(true));const res=await fetch('http://localhost:8000/api/v1/user/register',{method:\"POST\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(formData)});const data=await res.json();if(data.success){toast.success(data.message);navigate(\"/login\");}else{toast.error(data.message);}}catch(error){console.error(\"Error:\",error);toast.error(\"Signup failed\");}finally{dispatch(setLoading(false));}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center min-h-screen bg-gray-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-white p-8 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6 text-center\",children:\"Register\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700\",children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleChange,required:true,placeholder:\"Enter your name\",className:\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700\",children:\"Phone Number:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"phoneNumber\",value:formData.phoneNumber,onChange:handleChange,required:true,placeholder:\"Enter your phone number\",className:\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:formData.email,onChange:handleChange,required:true,placeholder:\"Enter your email\",className:\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:formData.password,onChange:handleChange,required:true,placeholder:\"Enter your password\",className:\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700\",children:\"Confirm Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"confirmPassword\",value:formData.confirmPassword,onChange:handleChange,required:true,placeholder:\"Confirm your password\",className:\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500\"}),passwordError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-1\",children:passwordError})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-gray-600 text-white font-bold py-3 rounded-md hover:bg-gray-700 transition duration-300\",disabled:loading,children:loading?/*#__PURE__*/_jsx(Loader2,{className:\"mr-2 h-4 w-4 animate-spin\"}):\"Sign Up\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center mt-3\",children:[\"Already have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:\"Login\"})})]})]})]})})]});};export default RegisterPage;","map":{"version":3,"names":["React","useState","toast","Link","useNavigate","useDispatch","useSelector","setLoading","Loader2","Navbar","jsx","_jsx","jsxs","_jsxs","RegisterPage","dispatch","loading","state","auth","navigate","formData","setFormData","name","phoneNumber","email","password","confirmPassword","passwordError","setPasswordError","handleChange","e","value","target","prevState","updatedForm","_objectSpread","handleSubmit","preventDefault","res","fetch","method","credentials","headers","body","JSON","stringify","data","json","success","message","error","console","children","className","onSubmit","type","onChange","required","placeholder","disabled","to"],"sources":["C:/Users/Lenovo/OneDrive/Desktop/Interview Prep mern/frontend/src/components/auth/RegisterPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { setLoading } from '../../redux/authSlice';\r\nimport { Loader2 } from \"lucide-react\";\r\nimport Navbar from '../Navbar';\r\n\r\nconst RegisterPage = () => {\r\n    const dispatch = useDispatch();\r\n    const loading = useSelector((state) => state.auth.loading);\r\n    const navigate = useNavigate();\r\n\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        phoneNumber: '',\r\n        email: '',\r\n        password: '',\r\n        confirmPassword: ''\r\n    });\r\n    const [passwordError, setPasswordError] = useState('');\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prevState => {\r\n            const updatedForm = { ...prevState, [name]: value };\r\n            // if(name === \"password\" || value?.length() < 6) {\r\n            //     setPasswordError('Password must be at least 6 characters'); \r\n            // }\r\n            if (updatedForm.password && updatedForm.confirmPassword) {\r\n                if (updatedForm.password !== updatedForm.confirmPassword) {\r\n                    setPasswordError('Passwords do not match');\r\n                } else {\r\n                    setPasswordError('');\r\n                }\r\n            }\r\n            \r\n            return updatedForm;\r\n        });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        \r\n        if (formData.password !== formData.confirmPassword) {\r\n            setPasswordError('Passwords do not match');\r\n            return;\r\n        }\r\n    \r\n        try {\r\n            dispatch(setLoading(true));\r\n            const res = await fetch('http://localhost:8000/api/v1/user/register', {\r\n                method: \"POST\",\r\n                credentials: \"include\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify(formData)\r\n            });\r\n    \r\n            const data = await res.json();\r\n    \r\n            if (data.success) {\r\n                toast.success(data.message);\r\n                navigate(\"/login\"); \r\n            } else {\r\n                toast.error(data.message);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error:\", error);\r\n            toast.error(\"Signup failed\");\r\n        } finally {\r\n            dispatch(setLoading(false));\r\n        }\r\n    };\r\n    \r\n    return (\r\n        <div>\r\n            <Navbar />\r\n            <div className=\"flex justify-center items-center min-h-screen bg-gray-100\">\r\n                <div className=\"w-full max-w-md bg-white p-8 rounded-lg shadow-md\">\r\n                    <h2 className=\"text-2xl font-bold mb-6 text-center\">Register</h2>\r\n                    <form onSubmit={handleSubmit}>\r\n                        <div className=\"mb-4\">\r\n                            <label className=\"block text-gray-700\">Name:</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                name=\"name\"\r\n                                value={formData.name}\r\n                                onChange={handleChange}\r\n                                required\r\n                                placeholder='Enter your name'\r\n                                className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"mb-4\">\r\n                            <label className=\"block text-gray-700\">Phone Number:</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                name=\"phoneNumber\"\r\n                                value={formData.phoneNumber}\r\n                                onChange={handleChange}\r\n                                required\r\n                                placeholder='Enter your phone number'\r\n                                className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"mb-4\">\r\n                            <label className=\"block text-gray-700\">Email:</label>\r\n                            <input\r\n                                type=\"email\"\r\n                                name=\"email\"\r\n                                value={formData.email}\r\n                                onChange={handleChange}\r\n                                required\r\n                                placeholder='Enter your email'\r\n                                className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"mb-4\">\r\n                            <label className=\"block text-gray-700\">Password:</label>\r\n                            <input\r\n                                type=\"password\"\r\n                                name=\"password\"\r\n                                value={formData.password}\r\n                                onChange={handleChange}\r\n                                required\r\n                                placeholder='Enter your password'\r\n                                className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"mb-4\">\r\n                            <label className=\"block text-gray-700\">Confirm Password:</label>\r\n                            <input\r\n                                type=\"password\"\r\n                                name=\"confirmPassword\"\r\n                                value={formData.confirmPassword}\r\n                                onChange={handleChange}\r\n                                required\r\n                                placeholder='Confirm your password'\r\n                                className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500\"\r\n                            />\r\n                            {passwordError && <p className=\"text-red-500 text-sm mt-1\">{passwordError}</p>}\r\n                        </div>\r\n                        <button\r\n                            type=\"submit\"\r\n                            className=\"w-full bg-gray-600 text-white font-bold py-3 rounded-md hover:bg-gray-700 transition duration-300\"\r\n                            disabled={loading}\r\n                        >\r\n                            {loading ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : \"Sign Up\"}\r\n                        </button>\r\n                        <p className='text-center mt-3'>Already have an account? <Link to='/login'><span className='text-gray-700'>Login</span></Link></p>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RegisterPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}